<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Voice Agent</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4"
  >
    <div
      class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-lg w-full text-center"
    >
      <h1
        class="text-4xl leading-tight font-extrabold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-transparent bg-clip-text mb-7"
      >
        AI Voice Agent
      </h1>

      <p class="text-gray-300 mb-6">
        Click <span class="font-semibold text-blue-400">Start</span> to talk to
        the AI. After it responds, recording will start again automatically.
      </p>

      <div class="flex justify-center gap-4 mb-6">
        <button
          id="startBtn"
          class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg shadow-lg transform hover:scale-105 transition"
        >
          ▶ Start Recording
        </button>
        <button
          id="stopBtn"
          disabled
          class="px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg shadow-lg transform hover:scale-105 transition disabled:opacity-50"
        >
          ⏹ Stop Recording
        </button>
      </div>

      <div id="sessionInfo" class="text-sm text-gray-400 mb-3"></div>
      <div id="errorMsg" class="text-sm text-red-400 font-semibold mb-3"></div>

      <div id="audioContainer" class="hidden mt-4">
        <audio
          id="audioPlayer"
          controls
          class="w-full rounded-lg border border-white/20"
        ></audio>
      </div>
    </div>

    <script>
      // Session ID display
      const params = new URLSearchParams(window.location.search);
      let sid = params.get("session_id");
      if (!sid) {
        sid = crypto.randomUUID();
        params.set("session_id", sid);
        window.history.replaceState({}, "", `${location.pathname}?${params}`);
      }
      document.getElementById("sessionInfo").innerText = `Session ID: ${sid}`;
    </script>

    <script src="/static/script.js"></script>
  </body>
</html>
